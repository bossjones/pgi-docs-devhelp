

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>
    Gio.Task -
    
      Classes -
    
    Gio 2.0
  </title>
  

  
  

  

  
  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  <link rel="stylesheet" href="../_static/css/pgi.css" type="text/css" />
    <link rel="top" title="Gio 2.0 Python API Docs" href="../index.html"/>
        <link rel="up" title="Classes" href="index.html"/>
        <link rel="next" title="Gio.TcpConnection" href="TcpConnection.html"/>
        <link rel="prev" title="Gio.SubprocessLauncher" href="SubprocessLauncher.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

<div class="non-fixed-bar">
<table class="navigation" summary="Navigation header" cellpadding="2" cellspacing="10" width="100%"><tbody><tr valign="middle">

<td class="shortcuts" align="left" width="100%">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Gio 2.0</a> &raquo;</li>
      
          <li><a href="index.html">Classes</a> &raquo;</li>
      
    <li>Gio.Task</li>
  </ul>
</td>
<td><a accesskey="h" href="../index.html"><i class="fa fa-home"></i></a></td>


<td><a accesskey="u" href="index.html"><i class="fa fa-chevron-up"></i></a></td>



<td><a accesskey="p" href="SubprocessLauncher.html"><i class="fa fa-chevron-left"></i></a></td>



<td><a accesskey="n" href="TcpConnection.html"><i class="fa fa-chevron-right"></i></a></td>


</tr></tbody>
</table>

<div class="local-toc">
    <ul>
<li><a class="reference internal" href="#">Gio.Task</a><ul>
<li><a class="reference internal" href="#methods">Methods</a></li>
<li><a class="reference internal" href="#virtual-methods">Virtual Methods</a></li>
<li><a class="reference internal" href="#properties">Properties</a></li>
<li><a class="reference internal" href="#signals">Signals</a></li>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#class-details">Class Details</a></li>
</ul>
</li>
</ul>

</div>
</div>

<div class="fixed-bar">
  <table class="navigation" summary="Navigation header" cellpadding="2" cellspacing="10" width="100%"><tbody><tr valign="middle">

<td class="shortcuts" align="left" width="100%">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Gio 2.0</a> &raquo;</li>
      
          <li><a href="index.html">Classes</a> &raquo;</li>
      
    <li>Gio.Task</li>
  </ul>
</td>
<td><a accesskey="h" href="../index.html"><i class="fa fa-home"></i></a></td>


<td><a accesskey="u" href="index.html"><i class="fa fa-chevron-up"></i></a></td>



<td><a accesskey="p" href="SubprocessLauncher.html"><i class="fa fa-chevron-left"></i></a></td>



<td><a accesskey="n" href="TcpConnection.html"><i class="fa fa-chevron-right"></i></a></td>


</tr></tbody>
</table>

<div class="local-toc">
    <ul>
<li><a class="reference internal" href="#">Gio.Task</a><ul>
<li><a class="reference internal" href="#methods">Methods</a></li>
<li><a class="reference internal" href="#virtual-methods">Virtual Methods</a></li>
<li><a class="reference internal" href="#properties">Properties</a></li>
<li><a class="reference internal" href="#signals">Signals</a></li>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#class-details">Class Details</a></li>
</ul>
</li>
</ul>

</div>
</div>

  <div class="wy-grid-for-nav">

    

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="main">
            
  <div class="section" id="gio-task">
<h1>Gio.Task</h1>
<p class="graphviz">
<svg width="198pt" height="134pt"
 viewBox="0.00 0.00 198.00 134.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 130)">
<title>inheritance7e7c5db39b</title>
<!-- GObject.GInterface -->
<g id="node1" class="node"><title>GObject.GInterface</title>
<g id="a_node1"><a xlink:href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/interfaces/GInterface.html#GObject.GInterface" xlink:title="GObject.GInterface">
<path fill="none" stroke="#3091d1" d="M92,-126C92,-126 6,-126 6,-126 3,-126 7.10543e-15,-123 7.10543e-15,-120 7.10543e-15,-120 7.10543e-15,-114 7.10543e-15,-114 7.10543e-15,-111 3,-108 6,-108 6,-108 92,-108 92,-108 95,-108 98,-111 98,-114 98,-114 98,-120 98,-120 98,-123 95,-126 92,-126"/>
<text text-anchor="middle" x="49" y="-114.7" font-family="inherit" font-size="8.50">GObject.GInterface</text>
</a>
</g>
</g>
<!-- Gio.AsyncResult -->
<g id="node2" class="node"><title>Gio.AsyncResult</title>
<g id="a_node2"><a xlink:href="../interfaces/AsyncResult.html#Gio.AsyncResult" xlink:title="Gio.AsyncResult">
<path fill="none" stroke="#3091d1" d="M85.5,-72C85.5,-72 12.5,-72 12.5,-72 9.5,-72 6.5,-69 6.5,-66 6.5,-66 6.5,-60 6.5,-60 6.5,-57 9.5,-54 12.5,-54 12.5,-54 85.5,-54 85.5,-54 88.5,-54 91.5,-57 91.5,-60 91.5,-60 91.5,-66 91.5,-66 91.5,-69 88.5,-72 85.5,-72"/>
<text text-anchor="middle" x="49" y="-60.7" font-family="inherit" font-size="8.50">Gio.AsyncResult</text>
</a>
</g>
</g>
<!-- GObject.GInterface&#45;&gt;Gio.AsyncResult -->
<g id="edge1" class="edge"><title>GObject.GInterface&#45;&gt;Gio.AsyncResult</title>
<path fill="none" stroke="black" stroke-width="0.5" d="M49,-107.875C49,-99.7564 49,-87.1312 49,-77.5044"/>
<polygon fill="black" stroke="black" stroke-width="0.5" points="50.7501,-77.2395 49,-72.2396 47.2501,-77.2396 50.7501,-77.2395"/>
</g>
<!-- Gio.Task -->
<g id="node4" class="node"><title>Gio.Task</title>
<g id="a_node4"><a xlink:href="#Gio.Task" xlink:title="Gio.Task">
<path fill="none" stroke="#75507b" d="M120,-18C120,-18 78,-18 78,-18 75,-18 72,-15 72,-12 72,-12 72,-6 72,-6 72,-3 75,-0 78,-0 78,-0 120,-0 120,-0 123,-0 126,-3 126,-6 126,-6 126,-12 126,-12 126,-15 123,-18 120,-18"/>
<text text-anchor="middle" x="99" y="-6.7" font-family="inherit" font-size="8.50">Gio.Task</text>
</a>
</g>
</g>
<!-- Gio.AsyncResult&#45;&gt;Gio.Task -->
<g id="edge3" class="edge"><title>Gio.AsyncResult&#45;&gt;Gio.Task</title>
<path fill="none" stroke="black" stroke-width="0.5" d="M56.8125,-53.875C65.0565,-45.3012 78.1336,-31.7011 87.5437,-21.9146"/>
<polygon fill="black" stroke="black" stroke-width="0.5" points="88.8732,-23.0567 91.0774,-18.2396 86.3503,-20.6308 88.8732,-23.0567"/>
</g>
<!-- GObject.Object -->
<g id="node3" class="node"><title>GObject.Object</title>
<g id="a_node3"><a xlink:href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#GObject.Object" xlink:title="GObject.Object">
<path fill="none" stroke="#75507b" d="M184,-72C184,-72 116,-72 116,-72 113,-72 110,-69 110,-66 110,-66 110,-60 110,-60 110,-57 113,-54 116,-54 116,-54 184,-54 184,-54 187,-54 190,-57 190,-60 190,-60 190,-66 190,-66 190,-69 187,-72 184,-72"/>
<text text-anchor="middle" x="150" y="-60.7" font-family="inherit" font-size="8.50">GObject.Object</text>
</a>
</g>
</g>
<!-- GObject.Object&#45;&gt;Gio.Task -->
<g id="edge2" class="edge"><title>GObject.Object&#45;&gt;Gio.Task</title>
<path fill="none" stroke="black" stroke-width="0.5" d="M142.031,-53.875C133.622,-45.3012 120.284,-31.7011 110.685,-21.9146"/>
<polygon fill="black" stroke="black" stroke-width="0.5" points="111.832,-20.5839 107.081,-18.2396 109.333,-23.0346 111.832,-20.5839"/>
</g>
</g>
</svg>
</p>
<div class="section" id="methods">
<span id="gio-task-methods"></span><h2>Methods</h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Inherited:</th><td class="field-body"><a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#gobject-object-methods" title="(in GObject 2.0 v2.0)"><em class="xref std std-ref">GObject.Object (33)</em></a>, <a class="reference internal" href="../interfaces/AsyncResult.html#gio-asyncresult-methods"><em>Gio.AsyncResult (4)</em></a></td>
</tr>
</tbody>
</table>
<table border="1" class="longtable docutils">
<colgroup>
<col width="0%" />
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><em>static</em></td>
<td><a class="reference internal" href="#Gio.Task.is_valid" title="Gio.Task.is_valid"><tt class="xref py py-obj docutils literal"><span class="pre">is_valid</span></tt></a>(result, source_object)</td>
</tr>
<tr class="row-even"><td><em>static</em></td>
<td><a class="reference internal" href="#Gio.Task.new" title="Gio.Task.new"><tt class="xref py py-obj docutils literal"><span class="pre">new</span></tt></a>(source_object, cancellable, callback, *callback_data)</td>
</tr>
<tr class="row-odd"><td><em>static</em></td>
<td><a class="reference internal" href="#Gio.Task.report_error" title="Gio.Task.report_error"><tt class="xref py py-obj docutils literal"><span class="pre">report_error</span></tt></a>(source_object, callback, callback_data, source_tag, error)</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.get_cancellable" title="Gio.Task.get_cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">get_cancellable</span></tt></a>()</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.get_check_cancellable" title="Gio.Task.get_check_cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">get_check_cancellable</span></tt></a>()</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.get_context" title="Gio.Task.get_context"><tt class="xref py py-obj docutils literal"><span class="pre">get_context</span></tt></a>()</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.get_priority" title="Gio.Task.get_priority"><tt class="xref py py-obj docutils literal"><span class="pre">get_priority</span></tt></a>()</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.get_return_on_cancel" title="Gio.Task.get_return_on_cancel"><tt class="xref py py-obj docutils literal"><span class="pre">get_return_on_cancel</span></tt></a>()</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.get_source_object" title="Gio.Task.get_source_object"><tt class="xref py py-obj docutils literal"><span class="pre">get_source_object</span></tt></a>()</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.get_source_tag" title="Gio.Task.get_source_tag"><tt class="xref py py-obj docutils literal"><span class="pre">get_source_tag</span></tt></a>()</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.get_task_data" title="Gio.Task.get_task_data"><tt class="xref py py-obj docutils literal"><span class="pre">get_task_data</span></tt></a>()</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.had_error" title="Gio.Task.had_error"><tt class="xref py py-obj docutils literal"><span class="pre">had_error</span></tt></a>()</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.propagate_boolean" title="Gio.Task.propagate_boolean"><tt class="xref py py-obj docutils literal"><span class="pre">propagate_boolean</span></tt></a>()</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.propagate_int" title="Gio.Task.propagate_int"><tt class="xref py py-obj docutils literal"><span class="pre">propagate_int</span></tt></a>()</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">propagate_pointer</span></tt></a>()</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.return_boolean" title="Gio.Task.return_boolean"><tt class="xref py py-obj docutils literal"><span class="pre">return_boolean</span></tt></a>(result)</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.return_error" title="Gio.Task.return_error"><tt class="xref py py-obj docutils literal"><span class="pre">return_error</span></tt></a>(error)</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><tt class="xref py py-obj docutils literal"><span class="pre">return_error_if_cancelled</span></tt></a>()</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.return_int" title="Gio.Task.return_int"><tt class="xref py py-obj docutils literal"><span class="pre">return_int</span></tt></a>(result)</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">return_pointer</span></tt></a>(result, result_destroy)</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.set_check_cancellable" title="Gio.Task.set_check_cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">set_check_cancellable</span></tt></a>(check_cancellable)</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.set_priority" title="Gio.Task.set_priority"><tt class="xref py py-obj docutils literal"><span class="pre">set_priority</span></tt></a>(priority)</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><tt class="xref py py-obj docutils literal"><span class="pre">set_return_on_cancel</span></tt></a>(return_on_cancel)</td>
</tr>
<tr class="row-even"><td></td>
<td><a class="reference internal" href="#Gio.Task.set_source_tag" title="Gio.Task.set_source_tag"><tt class="xref py py-obj docutils literal"><span class="pre">set_source_tag</span></tt></a>(source_tag)</td>
</tr>
<tr class="row-odd"><td></td>
<td><a class="reference internal" href="#Gio.Task.set_task_data" title="Gio.Task.set_task_data"><tt class="xref py py-obj docutils literal"><span class="pre">set_task_data</span></tt></a>(task_data, task_data_destroy)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="virtual-methods">
<span id="gio-task-vfuncs"></span><h2>Virtual Methods</h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Inherited:</th><td class="field-body"><a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#gobject-object-vfuncs" title="(in GObject 2.0 v2.0)"><em class="xref std std-ref">GObject.Object (7)</em></a>, <a class="reference internal" href="../interfaces/AsyncResult.html#gio-asyncresult-vfuncs"><em>Gio.AsyncResult (3)</em></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="properties">
<span id="gio-task-props"></span><h2>Properties</h2>
<p>None</p>
</div>
<div class="section" id="signals">
<span id="gio-task-signals"></span><h2>Signals</h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Inherited:</th><td class="field-body"><a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#gobject-object-signals" title="(in GObject 2.0 v2.0)"><em class="xref std std-ref">GObject.Object (1)</em></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fields">
<span id="gio-task-fields"></span><h2>Fields</h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Inherited:</th><td class="field-body"><a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#gobject-object-fields" title="(in GObject 2.0 v2.0)"><em class="xref std std-ref">GObject.Object (3)</em></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="class-details">
<h2>Class Details</h2>
<dl class="class">
<dt id="Gio.Task">
<em class="property">class </em><tt class="descclassname">Gio.</tt><tt class="descname">Task</tt><big>(</big><em>**kwargs</em><big>)</big></dt>
<dd><p>Bases: <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GObject.Object</span></tt></a>, <a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><tt class="xref py py-class docutils literal"><span class="pre">Gio.AsyncResult</span></tt></a></p>
<p>A <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> represents and manages a cancellable &#8220;task&#8221;.</p>
<p>## Asynchronous operations</p>
<p>The most common usage of <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> is as a <a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncResult</span></tt></a>, to
manage data during an asynchronous operation. You call
<a class="reference internal" href="#Gio.Task.new" title="Gio.Task.new"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.new</span></tt></a> () in the &#8220;start&#8221; method, followed by
<a class="reference internal" href="#Gio.Task.set_task_data" title="Gio.Task.set_task_data"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_task_data</span></tt></a> () and the like if you need to keep some
additional data associated with the task, and then pass the
task object around through your asynchronous operation.
Eventually, you will call a method such as
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_pointer</span></tt></a> () or <a class="reference internal" href="#Gio.Task.return_error" title="Gio.Task.return_error"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_error</span></tt></a> (), which will
save the value you give it and then invoke the task&#8217;s callback
function (waiting until the next iteration of the main
loop first, if necessary). The caller will pass the <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> back
to the operation&#8217;s finish function (as a <a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncResult</span></tt></a> ), and
you can use <a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.propagate_pointer</span></tt></a> () or the like to extract
the return value.</p>
<p>Here is an example for using <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> as a <a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncResult</span></tt></a>:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="n">language</span><span class="o">=</span><span class="s">&quot;C&quot;</span> <span class="o">--&gt;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">CakeFrostingType</span> <span class="n">frosting</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">message</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DecorationData</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">decoration_data_free</span> <span class="p">(</span><span class="n">DecorationData</span> <span class="o">*</span><span class="n">decoration</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">g_free</span> <span class="p">(</span><span class="n">decoration</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">);</span>
  <span class="n">g_slice_free</span> <span class="p">(</span><span class="n">DecorationData</span><span class="p">,</span> <span class="n">decoration</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">baked_cb</span> <span class="p">(</span><span class="n">Cake</span>     <span class="o">*</span><span class="n">cake</span><span class="p">,</span>
          <span class="n">gpointer</span>  <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GTask</span> <span class="o">*</span><span class="n">task</span> <span class="o">=</span> <span class="n">user_data</span><span class="p">;</span>
  <span class="n">DecorationData</span> <span class="o">*</span><span class="n">decoration</span> <span class="o">=</span> <span class="n">g_task_get_task_data</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
  <span class="n">GError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">cake</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">g_task_return_new_error</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">BAKER_ERROR</span><span class="p">,</span> <span class="n">BAKER_ERROR_NO_FLOUR</span><span class="p">,</span>
                               <span class="s">&quot;Go to the supermarket&quot;</span><span class="p">);</span>
      <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cake_decorate</span> <span class="p">(</span><span class="n">cake</span><span class="p">,</span> <span class="n">decoration</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="p">,</span> <span class="n">decoration</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">error</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">cake</span><span class="p">);</span>
      <span class="c1">// g_task_return_error() takes ownership of error</span>
      <span class="n">g_task_return_error</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
      <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="n">g_task_return_pointer</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">cake</span><span class="p">,</span> <span class="n">g_object_unref</span><span class="p">);</span>
  <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">baker_bake_cake_async</span> <span class="p">(</span><span class="n">Baker</span>               <span class="o">*</span><span class="n">self</span><span class="p">,</span>
                       <span class="n">guint</span>                <span class="n">radius</span><span class="p">,</span>
                       <span class="n">CakeFlavor</span>           <span class="n">flavor</span><span class="p">,</span>
                       <span class="n">CakeFrostingType</span>     <span class="n">frosting</span><span class="p">,</span>
                       <span class="k">const</span> <span class="kt">char</span>          <span class="o">*</span><span class="n">message</span><span class="p">,</span>
                       <span class="n">GCancellable</span>        <span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
                       <span class="n">GAsyncReadyCallback</span>  <span class="n">callback</span><span class="p">,</span>
                       <span class="n">gpointer</span>             <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GTask</span> <span class="o">*</span><span class="n">task</span><span class="p">;</span>
  <span class="n">DecorationData</span> <span class="o">*</span><span class="n">decoration</span><span class="p">;</span>
  <span class="n">Cake</span>  <span class="o">*</span><span class="n">cake</span><span class="p">;</span>

  <span class="n">task</span> <span class="o">=</span> <span class="n">g_task_new</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">cancellable</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">user_data</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">radius</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">g_task_return_new_error</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">BAKER_ERROR</span><span class="p">,</span> <span class="n">BAKER_ERROR_TOO_SMALL</span><span class="p">,</span>
                               <span class="s">&quot;%ucm radius cakes are silly&quot;</span><span class="p">,</span>
                               <span class="n">radius</span><span class="p">);</span>
      <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="n">cake</span> <span class="o">=</span> <span class="n">_baker_get_cached_cake</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">flavor</span><span class="p">,</span> <span class="n">frosting</span><span class="p">,</span> <span class="n">message</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">cake</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="c1">// _baker_get_cached_cake() returns a reffed cake</span>
      <span class="n">g_task_return_pointer</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">cake</span><span class="p">,</span> <span class="n">g_object_unref</span><span class="p">);</span>
      <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="n">decoration</span> <span class="o">=</span> <span class="n">g_slice_new</span> <span class="p">(</span><span class="n">DecorationData</span><span class="p">);</span>
  <span class="n">decoration</span><span class="o">-&gt;</span><span class="n">frosting</span> <span class="o">=</span> <span class="n">frosting</span><span class="p">;</span>
  <span class="n">decoration</span><span class="o">-&gt;</span><span class="n">message</span> <span class="o">=</span> <span class="n">g_strdup</span> <span class="p">(</span><span class="n">message</span><span class="p">);</span>
  <span class="n">g_task_set_task_data</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">decoration</span><span class="p">,</span> <span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span> <span class="n">decoration_data_free</span><span class="p">);</span>

  <span class="n">_baker_begin_cake</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">flavor</span><span class="p">,</span> <span class="n">cancellable</span><span class="p">,</span> <span class="n">baked_cb</span><span class="p">,</span> <span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Cake</span> <span class="o">*</span>
<span class="nf">baker_bake_cake_finish</span> <span class="p">(</span><span class="n">Baker</span>         <span class="o">*</span><span class="n">self</span><span class="p">,</span>
                        <span class="n">GAsyncResult</span>  <span class="o">*</span><span class="n">result</span><span class="p">,</span>
                        <span class="n">GError</span>       <span class="o">**</span><span class="n">error</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">g_return_val_if_fail</span> <span class="p">(</span><span class="n">g_task_is_valid</span> <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">self</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">);</span>

  <span class="k">return</span> <span class="n">g_task_propagate_pointer</span> <span class="p">(</span><span class="n">G_TASK</span> <span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">error</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>## Chained asynchronous operations</p>
<p><a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> also tries to simplify asynchronous operations that
internally chain together several smaller asynchronous
operations. <a class="reference internal" href="#Gio.Task.get_cancellable" title="Gio.Task.get_cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.get_cancellable</span></tt></a> (), <a class="reference internal" href="#Gio.Task.get_context" title="Gio.Task.get_context"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.get_context</span></tt></a> (),
and <a class="reference internal" href="#Gio.Task.get_priority" title="Gio.Task.get_priority"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.get_priority</span></tt></a> () allow you to get back the task&#8217;s
<a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a>, <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a>, and [I/O priority][io-priority]
when starting a new subtask, so you don&#8217;t have to keep track
of them yourself. <tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.attach_source</span></tt> () simplifies the case
of waiting for a source to fire (automatically using the correct
<a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a> and priority).</p>
<p>Here is an example for chained asynchronous operations:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="n">language</span><span class="o">=</span><span class="s">&quot;C&quot;</span> <span class="o">--&gt;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">Cake</span> <span class="o">*</span><span class="n">cake</span><span class="p">;</span>
  <span class="n">CakeFrostingType</span> <span class="n">frosting</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">message</span><span class="p">;</span>
<span class="p">}</span> <span class="n">BakingData</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">decoration_data_free</span> <span class="p">(</span><span class="n">BakingData</span> <span class="o">*</span><span class="n">bd</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">cake</span><span class="p">)</span>
    <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">cake</span><span class="p">);</span>
  <span class="n">g_free</span> <span class="p">(</span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">);</span>
  <span class="n">g_slice_free</span> <span class="p">(</span><span class="n">BakingData</span><span class="p">,</span> <span class="n">bd</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">decorated_cb</span> <span class="p">(</span><span class="n">Cake</span>         <span class="o">*</span><span class="n">cake</span><span class="p">,</span>
              <span class="n">GAsyncResult</span> <span class="o">*</span><span class="n">result</span><span class="p">,</span>
              <span class="n">gpointer</span>      <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GTask</span> <span class="o">*</span><span class="n">task</span> <span class="o">=</span> <span class="n">user_data</span><span class="p">;</span>
  <span class="n">GError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cake_decorate_finish</span> <span class="p">(</span><span class="n">cake</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">error</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">cake</span><span class="p">);</span>
      <span class="n">g_task_return_error</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
      <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="c1">// baking_data_free() will drop its ref on the cake, so we have to</span>
  <span class="c1">// take another here to give to the caller.</span>
  <span class="n">g_task_return_pointer</span> <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">g_object_ref</span> <span class="p">(</span><span class="n">cake</span><span class="p">),</span> <span class="n">g_object_unref</span><span class="p">);</span>
  <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">decorator_ready</span> <span class="p">(</span><span class="n">gpointer</span> <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GTask</span> <span class="o">*</span><span class="n">task</span> <span class="o">=</span> <span class="n">user_data</span><span class="p">;</span>
  <span class="n">BakingData</span> <span class="o">*</span><span class="n">bd</span> <span class="o">=</span> <span class="n">g_task_get_task_data</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>

  <span class="n">cake_decorate_async</span> <span class="p">(</span><span class="n">bd</span><span class="o">-&gt;</span><span class="n">cake</span><span class="p">,</span> <span class="n">bd</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="p">,</span> <span class="n">bd</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">,</span>
                       <span class="n">g_task_get_cancellable</span> <span class="p">(</span><span class="n">task</span><span class="p">),</span>
                       <span class="n">decorated_cb</span><span class="p">,</span> <span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">baked_cb</span> <span class="p">(</span><span class="n">Cake</span>     <span class="o">*</span><span class="n">cake</span><span class="p">,</span>
          <span class="n">gpointer</span>  <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GTask</span> <span class="o">*</span><span class="n">task</span> <span class="o">=</span> <span class="n">user_data</span><span class="p">;</span>
  <span class="n">BakingData</span> <span class="o">*</span><span class="n">bd</span> <span class="o">=</span> <span class="n">g_task_get_task_data</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
  <span class="n">GError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">cake</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">g_task_return_new_error</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">BAKER_ERROR</span><span class="p">,</span> <span class="n">BAKER_ERROR_NO_FLOUR</span><span class="p">,</span>
                               <span class="s">&quot;Go to the supermarket&quot;</span><span class="p">);</span>
      <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="n">bd</span><span class="o">-&gt;</span><span class="n">cake</span> <span class="o">=</span> <span class="n">cake</span><span class="p">;</span>

  <span class="c1">// Bail out now if the user has already cancelled</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">g_task_return_error_if_cancelled</span> <span class="p">(</span><span class="n">task</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">cake_decorator_available</span> <span class="p">(</span><span class="n">cake</span><span class="p">))</span>
    <span class="n">decorator_ready</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
  <span class="k">else</span>
    <span class="p">{</span>
      <span class="n">GSource</span> <span class="o">*</span><span class="n">source</span><span class="p">;</span>

      <span class="n">source</span> <span class="o">=</span> <span class="n">cake_decorator_wait_source_new</span> <span class="p">(</span><span class="n">cake</span><span class="p">);</span>
      <span class="c1">// Attach @source to @task&#39;s GMainContext and have it call</span>
      <span class="c1">// decorator_ready() when it is ready.</span>
      <span class="n">g_task_attach_source</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span>
                            <span class="n">G_CALLBACK</span> <span class="p">(</span><span class="n">decorator_ready</span><span class="p">));</span>
      <span class="n">g_source_unref</span> <span class="p">(</span><span class="n">source</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">baker_bake_cake_async</span> <span class="p">(</span><span class="n">Baker</span>               <span class="o">*</span><span class="n">self</span><span class="p">,</span>
                       <span class="n">guint</span>                <span class="n">radius</span><span class="p">,</span>
                       <span class="n">CakeFlavor</span>           <span class="n">flavor</span><span class="p">,</span>
                       <span class="n">CakeFrostingType</span>     <span class="n">frosting</span><span class="p">,</span>
                       <span class="k">const</span> <span class="kt">char</span>          <span class="o">*</span><span class="n">message</span><span class="p">,</span>
                       <span class="n">gint</span>                 <span class="n">priority</span><span class="p">,</span>
                       <span class="n">GCancellable</span>        <span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
                       <span class="n">GAsyncReadyCallback</span>  <span class="n">callback</span><span class="p">,</span>
                       <span class="n">gpointer</span>             <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GTask</span> <span class="o">*</span><span class="n">task</span><span class="p">;</span>
  <span class="n">BakingData</span> <span class="o">*</span><span class="n">bd</span><span class="p">;</span>

  <span class="n">task</span> <span class="o">=</span> <span class="n">g_task_new</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">cancellable</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">user_data</span><span class="p">);</span>
  <span class="n">g_task_set_priority</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">priority</span><span class="p">);</span>

  <span class="n">bd</span> <span class="o">=</span> <span class="n">g_slice_new0</span> <span class="p">(</span><span class="n">BakingData</span><span class="p">);</span>
  <span class="n">bd</span><span class="o">-&gt;</span><span class="n">frosting</span> <span class="o">=</span> <span class="n">frosting</span><span class="p">;</span>
  <span class="n">bd</span><span class="o">-&gt;</span><span class="n">message</span> <span class="o">=</span> <span class="n">g_strdup</span> <span class="p">(</span><span class="n">message</span><span class="p">);</span>
  <span class="n">g_task_set_task_data</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">bd</span><span class="p">,</span> <span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span> <span class="n">baking_data_free</span><span class="p">);</span>

  <span class="n">_baker_begin_cake</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">flavor</span><span class="p">,</span> <span class="n">cancellable</span><span class="p">,</span> <span class="n">baked_cb</span><span class="p">,</span> <span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Cake</span> <span class="o">*</span>
<span class="nf">baker_bake_cake_finish</span> <span class="p">(</span><span class="n">Baker</span>         <span class="o">*</span><span class="n">self</span><span class="p">,</span>
                        <span class="n">GAsyncResult</span>  <span class="o">*</span><span class="n">result</span><span class="p">,</span>
                        <span class="n">GError</span>       <span class="o">**</span><span class="n">error</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">g_return_val_if_fail</span> <span class="p">(</span><span class="n">g_task_is_valid</span> <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">self</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">);</span>

  <span class="k">return</span> <span class="n">g_task_propagate_pointer</span> <span class="p">(</span><span class="n">G_TASK</span> <span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">error</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>## Asynchronous operations from synchronous ones</p>
<p>You can use <tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.run_in_thread</span></tt> () to turn a synchronous
operation into an asynchronous one, by running it in a thread
which will then dispatch the result back to the caller&#8217;s
<a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a> when it completes.</p>
<p>Running a task in a thread:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="n">language</span><span class="o">=</span><span class="s">&quot;C&quot;</span> <span class="o">--&gt;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">guint</span> <span class="n">radius</span><span class="p">;</span>
  <span class="n">CakeFlavor</span> <span class="n">flavor</span><span class="p">;</span>
  <span class="n">CakeFrostingType</span> <span class="n">frosting</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">message</span><span class="p">;</span>
<span class="p">}</span> <span class="n">CakeData</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">cake_data_free</span> <span class="p">(</span><span class="n">CakeData</span> <span class="o">*</span><span class="n">cake_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">g_free</span> <span class="p">(</span><span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">);</span>
  <span class="n">g_slice_free</span> <span class="p">(</span><span class="n">CakeData</span><span class="p">,</span> <span class="n">cake_data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">bake_cake_thread</span> <span class="p">(</span><span class="n">GTask</span>         <span class="o">*</span><span class="n">task</span><span class="p">,</span>
                  <span class="n">gpointer</span>       <span class="n">source_object</span><span class="p">,</span>
                  <span class="n">gpointer</span>       <span class="n">task_data</span><span class="p">,</span>
                  <span class="n">GCancellable</span>  <span class="o">*</span><span class="n">cancellable</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Baker</span> <span class="o">*</span><span class="n">self</span> <span class="o">=</span> <span class="n">source_object</span><span class="p">;</span>
  <span class="n">CakeData</span> <span class="o">*</span><span class="n">cake_data</span> <span class="o">=</span> <span class="n">task_data</span><span class="p">;</span>
  <span class="n">Cake</span> <span class="o">*</span><span class="n">cake</span><span class="p">;</span>
  <span class="n">GError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

  <span class="n">cake</span> <span class="o">=</span> <span class="n">bake_cake</span> <span class="p">(</span><span class="n">baker</span><span class="p">,</span> <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">radius</span><span class="p">,</span> <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">flavor</span><span class="p">,</span>
                    <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="p">,</span> <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">,</span>
                    <span class="n">cancellable</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">error</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">cake</span><span class="p">)</span>
    <span class="n">g_task_return_pointer</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">cake</span><span class="p">,</span> <span class="n">g_object_unref</span><span class="p">);</span>
  <span class="k">else</span>
    <span class="n">g_task_return_error</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">baker_bake_cake_async</span> <span class="p">(</span><span class="n">Baker</span>               <span class="o">*</span><span class="n">self</span><span class="p">,</span>
                       <span class="n">guint</span>                <span class="n">radius</span><span class="p">,</span>
                       <span class="n">CakeFlavor</span>           <span class="n">flavor</span><span class="p">,</span>
                       <span class="n">CakeFrostingType</span>     <span class="n">frosting</span><span class="p">,</span>
                       <span class="k">const</span> <span class="kt">char</span>          <span class="o">*</span><span class="n">message</span><span class="p">,</span>
                       <span class="n">GCancellable</span>        <span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
                       <span class="n">GAsyncReadyCallback</span>  <span class="n">callback</span><span class="p">,</span>
                       <span class="n">gpointer</span>             <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">CakeData</span> <span class="o">*</span><span class="n">cake_data</span><span class="p">;</span>
  <span class="n">GTask</span> <span class="o">*</span><span class="n">task</span><span class="p">;</span>

  <span class="n">cake_data</span> <span class="o">=</span> <span class="n">g_slice_new</span> <span class="p">(</span><span class="n">CakeData</span><span class="p">);</span>
  <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="p">;</span>
  <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">flavor</span> <span class="o">=</span> <span class="n">flavor</span><span class="p">;</span>
  <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">frosting</span> <span class="o">=</span> <span class="n">frosting</span><span class="p">;</span>
  <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">message</span> <span class="o">=</span> <span class="n">g_strdup</span> <span class="p">(</span><span class="n">message</span><span class="p">);</span>
  <span class="n">task</span> <span class="o">=</span> <span class="n">g_task_new</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">cancellable</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">user_data</span><span class="p">);</span>
  <span class="n">g_task_set_task_data</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">cake_data</span><span class="p">,</span> <span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span> <span class="n">cake_data_free</span><span class="p">);</span>
  <span class="n">g_task_run_in_thread</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">bake_cake_thread</span><span class="p">);</span>
  <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Cake</span> <span class="o">*</span>
<span class="nf">baker_bake_cake_finish</span> <span class="p">(</span><span class="n">Baker</span>         <span class="o">*</span><span class="n">self</span><span class="p">,</span>
                        <span class="n">GAsyncResult</span>  <span class="o">*</span><span class="n">result</span><span class="p">,</span>
                        <span class="n">GError</span>       <span class="o">**</span><span class="n">error</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">g_return_val_if_fail</span> <span class="p">(</span><span class="n">g_task_is_valid</span> <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">self</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">);</span>

  <span class="k">return</span> <span class="n">g_task_propagate_pointer</span> <span class="p">(</span><span class="n">G_TASK</span> <span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">error</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>## Adding cancellability to uncancellable tasks</p>
<p>Finally, <tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.run_in_thread</span></tt> () and <tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.run_in_thread_sync</span></tt> ()
can be used to turn an uncancellable operation into a
cancellable one. If you call <a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_return_on_cancel</span></tt></a> (),
passing <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>, then if the task&#8217;s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> is cancelled,
it will return control back to the caller immediately, while
allowing the task thread to continue running in the background
(and simply discarding its result when it finally does finish).
Provided that the task thread is careful about how it uses
locks and other externally-visible resources, this allows you
to make &#8220;GLib-friendly&#8221; asynchronous and cancellable
synchronous variants of blocking APIs.</p>
<p>Cancelling a task:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="o">&lt;!--</span> <span class="n">language</span><span class="o">=</span><span class="s">&quot;C&quot;</span> <span class="o">--&gt;</span>
<span class="k">static</span> <span class="kt">void</span>
<span class="n">bake_cake_thread</span> <span class="p">(</span><span class="n">GTask</span>         <span class="o">*</span><span class="n">task</span><span class="p">,</span>
                  <span class="n">gpointer</span>       <span class="n">source_object</span><span class="p">,</span>
                  <span class="n">gpointer</span>       <span class="n">task_data</span><span class="p">,</span>
                  <span class="n">GCancellable</span>  <span class="o">*</span><span class="n">cancellable</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Baker</span> <span class="o">*</span><span class="n">self</span> <span class="o">=</span> <span class="n">source_object</span><span class="p">;</span>
  <span class="n">CakeData</span> <span class="o">*</span><span class="n">cake_data</span> <span class="o">=</span> <span class="n">task_data</span><span class="p">;</span>
  <span class="n">Cake</span> <span class="o">*</span><span class="n">cake</span><span class="p">;</span>
  <span class="n">GError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

  <span class="n">cake</span> <span class="o">=</span> <span class="n">bake_cake</span> <span class="p">(</span><span class="n">baker</span><span class="p">,</span> <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">radius</span><span class="p">,</span> <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">flavor</span><span class="p">,</span>
                    <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">frosting</span><span class="p">,</span> <span class="n">cake_data</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">,</span>
                    <span class="o">&amp;</span><span class="n">error</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">g_task_return_error</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="c1">// If the task has already been cancelled, then we don&#39;t want to add</span>
  <span class="c1">// the cake to the cake cache. Likewise, we don&#39;t  want to have the</span>
  <span class="c1">// task get cancelled in the middle of updating the cache.</span>
  <span class="c1">// g_task_set_return_on_cancel() will return %TRUE here if it managed</span>
  <span class="c1">// to disable return-on-cancel, or %FALSE if the task was cancelled</span>
  <span class="c1">// before it could.</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">g_task_set_return_on_cancel</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="c1">// If the caller cancels at this point, their</span>
      <span class="c1">// GAsyncReadyCallback won&#39;t be invoked until we return,</span>
      <span class="c1">// so we don&#39;t have to worry that this code will run at</span>
      <span class="c1">// the same time as that code does. But if there were</span>
      <span class="c1">// other functions that might look at the cake cache,</span>
      <span class="c1">// then we&#39;d probably need a GMutex here as well.</span>
      <span class="n">baker_add_cake_to_cache</span> <span class="p">(</span><span class="n">baker</span><span class="p">,</span> <span class="n">cake</span><span class="p">);</span>
      <span class="n">g_task_return_pointer</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">cake</span><span class="p">,</span> <span class="n">g_object_unref</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="n">baker_bake_cake_async</span> <span class="p">(</span><span class="n">Baker</span>               <span class="o">*</span><span class="n">self</span><span class="p">,</span>
                       <span class="n">guint</span>                <span class="n">radius</span><span class="p">,</span>
                       <span class="n">CakeFlavor</span>           <span class="n">flavor</span><span class="p">,</span>
                       <span class="n">CakeFrostingType</span>     <span class="n">frosting</span><span class="p">,</span>
                       <span class="k">const</span> <span class="kt">char</span>          <span class="o">*</span><span class="n">message</span><span class="p">,</span>
                       <span class="n">GCancellable</span>        <span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
                       <span class="n">GAsyncReadyCallback</span>  <span class="n">callback</span><span class="p">,</span>
                       <span class="n">gpointer</span>             <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">CakeData</span> <span class="o">*</span><span class="n">cake_data</span><span class="p">;</span>
  <span class="n">GTask</span> <span class="o">*</span><span class="n">task</span><span class="p">;</span>

  <span class="n">cake_data</span> <span class="o">=</span> <span class="n">g_slice_new</span> <span class="p">(</span><span class="n">CakeData</span><span class="p">);</span>

  <span class="p">...</span>

  <span class="n">task</span> <span class="o">=</span> <span class="n">g_task_new</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">cancellable</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">user_data</span><span class="p">);</span>
  <span class="n">g_task_set_task_data</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">cake_data</span><span class="p">,</span> <span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span> <span class="n">cake_data_free</span><span class="p">);</span>
  <span class="n">g_task_set_return_on_cancel</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">);</span>
  <span class="n">g_task_run_in_thread</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">bake_cake_thread</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Cake</span> <span class="o">*</span>
<span class="n">baker_bake_cake_sync</span> <span class="p">(</span><span class="n">Baker</span>               <span class="o">*</span><span class="n">self</span><span class="p">,</span>
                      <span class="n">guint</span>                <span class="n">radius</span><span class="p">,</span>
                      <span class="n">CakeFlavor</span>           <span class="n">flavor</span><span class="p">,</span>
                      <span class="n">CakeFrostingType</span>     <span class="n">frosting</span><span class="p">,</span>
                      <span class="k">const</span> <span class="kt">char</span>          <span class="o">*</span><span class="n">message</span><span class="p">,</span>
                      <span class="n">GCancellable</span>        <span class="o">*</span><span class="n">cancellable</span><span class="p">,</span>
                      <span class="n">GError</span>             <span class="o">**</span><span class="n">error</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">CakeData</span> <span class="o">*</span><span class="n">cake_data</span><span class="p">;</span>
  <span class="n">GTask</span> <span class="o">*</span><span class="n">task</span><span class="p">;</span>
  <span class="n">Cake</span> <span class="o">*</span><span class="n">cake</span><span class="p">;</span>

  <span class="n">cake_data</span> <span class="o">=</span> <span class="n">g_slice_new</span> <span class="p">(</span><span class="n">CakeData</span><span class="p">);</span>

  <span class="p">...</span>

  <span class="n">task</span> <span class="o">=</span> <span class="n">g_task_new</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">cancellable</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="n">g_task_set_task_data</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">cake_data</span><span class="p">,</span> <span class="p">(</span><span class="n">GDestroyNotify</span><span class="p">)</span> <span class="n">cake_data_free</span><span class="p">);</span>
  <span class="n">g_task_set_return_on_cancel</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">);</span>
  <span class="n">g_task_run_in_thread_sync</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">bake_cake_thread</span><span class="p">);</span>

  <span class="n">cake</span> <span class="o">=</span> <span class="n">g_task_propagate_pointer</span> <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
  <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">task</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">cake</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>## Porting from <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult</span></tt></a></p>
<p><a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> &#8216;s API attempts to be simpler than <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult</span></tt></a> &#8216;s
in several ways:
- You can save task-specific data with <a class="reference internal" href="#Gio.Task.set_task_data" title="Gio.Task.set_task_data"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_task_data</span></tt></a> (), and
retrieve it later with <a class="reference internal" href="#Gio.Task.get_task_data" title="Gio.Task.get_task_data"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.get_task_data</span></tt></a> (). This replaces the
abuse of <tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult.set_op_res_gpointer</span></tt> () for the same
purpose with <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult</span></tt></a>.
- In addition to the task data, <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> also keeps track of the
[priority][io-priority], <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a>, and
<a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a> associated with the task, so tasks that consist of
a chain of simpler asynchronous operations will have easy access
to those values when starting each sub-task.
- <a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_error_if_cancelled</span></tt></a> () provides simplified
handling for cancellation. In addition, cancellation
overrides any other <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> return value by default, like
<a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult</span></tt></a> does when
<a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult.set_check_cancellable" title="Gio.SimpleAsyncResult.set_check_cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult.set_check_cancellable</span></tt></a> () is called.
(You can use <a class="reference internal" href="#Gio.Task.set_check_cancellable" title="Gio.Task.set_check_cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_check_cancellable</span></tt></a> () to turn off that
behavior.) On the other hand, <tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.run_in_thread</span></tt> ()
guarantees that it will always run your
`task_func`, even if the task&#8217;s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> 
is already cancelled before the task gets a chance to run;
you can start your `task_func` with a
<a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_error_if_cancelled</span></tt></a> () check if you need the
old behavior.
- The &#8220;return&#8221; methods (eg, <a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_pointer</span></tt></a> ())
automatically cause the task to be &#8220;completed&#8221; as well, and
there is no need to worry about the &#8220;complete&#8221; vs &#8220;complete
in idle&#8221; distinction. (<a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> automatically figures out
whether the task&#8217;s callback can be invoked directly, or
if it needs to be sent to another <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a>, or delayed
until the next iteration of the current <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a>.)
- The &#8220;finish&#8221; functions for <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a>-based operations are generally
much simpler than <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult</span></tt></a> ones, normally consisting
of only a single call to <a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.propagate_pointer</span></tt></a> () or the like.
Since <a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.propagate_pointer</span></tt></a> () &#8220;steals&#8221; the return value from
the <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a>, it is not necessary to juggle pointers around to
prevent it from being freed twice.
- With <a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult</span></tt></a>, it was common to call
<a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult.propagate_error" title="Gio.SimpleAsyncResult.propagate_error"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult.propagate_error</span></tt></a> () from the
`_finish()` wrapper function, and have
virtual method implementations only deal with successful
returns. This behavior is deprecated, because it makes it
difficult for a subclass to chain to a parent class&#8217;s async
methods. Instead, the wrapper function should just be a
simple wrapper, and the virtual method should call an
appropriate `g_task_propagate_` function.
Note that wrapper methods can now use
<a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult.legacy_propagate_error" title="Gio.AsyncResult.legacy_propagate_error"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncResult.legacy_propagate_error</span></tt></a> () to do old-style
<a class="reference internal" href="SimpleAsyncResult.html#Gio.SimpleAsyncResult" title="Gio.SimpleAsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.SimpleAsyncResult</span></tt></a> error-returning behavior, and
<a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult.is_tagged" title="Gio.AsyncResult.is_tagged"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncResult.is_tagged</span></tt></a> () to check if a result is tagged as
having come from the `_async()` wrapper
function (for &#8220;short-circuit&#8221; results, such as when passing
0 to <a class="reference internal" href="InputStream.html#Gio.InputStream.read_async" title="Gio.InputStream.read_async"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.InputStream.read_async</span></tt></a> ()).</p>
<dl class="staticmethod">
<dt id="Gio.Task.is_valid">
<em class="property">static </em><tt class="descname">is_valid</tt><big>(</big><em>result</em>, <em>source_object</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>result</strong> (<a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><tt class="xref py py-class docutils literal"><span class="pre">Gio.AsyncResult</span></tt></a>) &#8211; A <a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult" title="Gio.AsyncResult"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncResult</span></tt></a></li>
<li><strong>source_object</strong> (<a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GObject.Object</span></tt></a> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; the source object
expected to be associated with the task</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/2.7/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a> if <cite>result</cite> and <cite>source_object</cite> are valid, <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a>
if not</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
<p>Checks that <cite>result</cite> is a <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a>, and that <cite>source_object</cite> is its
source object (or that <cite>source_object</cite> is <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> and <cite>result</cite> has no
source object). This can be used in g_return_if_fail() checks.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Gio.Task.new">
<em class="property">static </em><tt class="descname">new</tt><big>(</big><em>source_object</em>, <em>cancellable</em>, <em>callback</em>, <em>*callback_data</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>source_object</strong> (<a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GObject.Object</span></tt></a> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; the <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GObject.Object</span></tt></a> that owns
this task, or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>.</li>
<li><strong>cancellable</strong> (<a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-class docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; optional <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> object, <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> to ignore.</li>
<li><strong>callback</strong> (<a class="reference internal" href="../callbacks.html#Gio.AsyncReadyCallback" title="Gio.AsyncReadyCallback"><tt class="xref py py-class docutils literal"><span class="pre">Gio.AsyncReadyCallback</span></tt></a> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; a <a class="reference internal" href="../callbacks.html#Gio.AsyncReadyCallback" title="Gio.AsyncReadyCallback"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncReadyCallback</span></tt></a>.</li>
<li><strong>callback_data</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a>) &#8211; user data passed to <cite>callback</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-class docutils literal"><span class="pre">Gio.Task</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
<p>Creates a <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> acting on <cite>source_object</cite>, which will eventually be
used to invoke <cite>callback</cite> in the current
[thread-default main context][g-main-context-push-thread-default].</p>
<p>Call this in the &#8220;start&#8221; method of your asynchronous method, and
pass the <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> around throughout the asynchronous operation. You
can use <a class="reference internal" href="#Gio.Task.set_task_data" title="Gio.Task.set_task_data"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_task_data</span></tt></a> () to attach task-specific data to the
object, which you can retrieve later via <a class="reference internal" href="#Gio.Task.get_task_data" title="Gio.Task.get_task_data"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.get_task_data</span></tt></a> ().</p>
<p>By default, if <cite>cancellable</cite> is cancelled, then the return value of
the task will always be <a class="reference internal" href="../enums.html#Gio.IOErrorEnum.CANCELLED" title="Gio.IOErrorEnum.CANCELLED"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.IOErrorEnum.CANCELLED</span></tt></a>, even if the task had
already completed before the cancellation. This allows for
simplified handling in cases where cancellation may imply that
other objects that the task depends on have been destroyed. If you
do not want this behavior, you can use
<a class="reference internal" href="#Gio.Task.set_check_cancellable" title="Gio.Task.set_check_cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_check_cancellable</span></tt></a> () to change it.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Gio.Task.report_error">
<em class="property">static </em><tt class="descname">report_error</tt><big>(</big><em>source_object</em>, <em>callback</em>, <em>callback_data</em>, <em>source_tag</em>, <em>error</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source_object</strong> (<a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GObject.Object</span></tt></a> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; the <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GObject.Object</span></tt></a> that owns
this task, or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>.</li>
<li><strong>callback</strong> (<a class="reference internal" href="../callbacks.html#Gio.AsyncReadyCallback" title="Gio.AsyncReadyCallback"><tt class="xref py py-class docutils literal"><span class="pre">Gio.AsyncReadyCallback</span></tt></a> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; a <a class="reference internal" href="../callbacks.html#Gio.AsyncReadyCallback" title="Gio.AsyncReadyCallback"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncReadyCallback</span></tt></a>.</li>
<li><strong>callback_data</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a>) &#8211; user data passed to <cite>callback</cite>.</li>
<li><strong>source_tag</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a>) &#8211; an opaque pointer indicating the source of this task</li>
<li><strong>error</strong> (<a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/classes/GError.html#GLib.GError" title="(in GLib 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GLib.GError</span></tt></a>) &#8211; error to report</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Creates a <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> and then immediately calls <a class="reference internal" href="#Gio.Task.return_error" title="Gio.Task.return_error"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_error</span></tt></a> ()
on it. Use this in the wrapper function of an asynchronous method
when you want to avoid even calling the virtual method. You can
then use <a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult.is_tagged" title="Gio.AsyncResult.is_tagged"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncResult.is_tagged</span></tt></a> () in the finish method wrapper to
check if the result there is tagged as having been created by the
wrapper method, and deal with it appropriately if so.</p>
<p>See also <tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.report_new_error</span></tt> ().</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.get_cancellable">
<tt class="descname">get_cancellable</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><cite>task</cite> &#8216;s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-class docutils literal"><span class="pre">Gio.Cancellable</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets <cite>task</cite> &#8216;s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.get_check_cancellable">
<tt class="descname">get_check_cancellable</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets <cite>task</cite> &#8216;s check-cancellable flag. See
<a class="reference internal" href="#Gio.Task.set_check_cancellable" title="Gio.Task.set_check_cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_check_cancellable</span></tt></a> () for more details.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.get_context">
<tt class="descname">get_context</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><cite>task</cite> &#8216;s <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GLib.MainContext</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets the <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a> that <cite>task</cite> will return its result in (that
is, the context that was the
[thread-default main context][g-main-context-push-thread-default]
at the point when <cite>task</cite> was created).</p>
<p>This will always return a non-<a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> value, even if the task&#8217;s
context is the default <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.get_priority">
<tt class="descname">get_priority</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><cite>task</cite> &#8216;s priority</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">int</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets <cite>task</cite> &#8216;s priority</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.get_return_on_cancel">
<tt class="descname">get_return_on_cancel</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets <cite>task</cite> &#8216;s return-on-cancel flag. See
<a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_return_on_cancel</span></tt></a> () for more details.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.get_source_object">
<tt class="descname">get_source_object</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><cite>task</cite> &#8216;s source object, or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GObject-2.0/classes/Object.html#GObject.Object" title="(in GObject 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GObject.Object</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets the source object from <cite>task</cite>. Like
<a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult.get_source_object" title="Gio.AsyncResult.get_source_object"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncResult.get_source_object</span></tt></a> (), but does not ref the object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.get_source_tag">
<tt class="descname">get_source_tag</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><cite>task</cite> &#8216;s source tag</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets <cite>task</cite> &#8216;s source tag. See <a class="reference internal" href="#Gio.Task.set_source_tag" title="Gio.Task.set_source_tag"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_source_tag</span></tt></a> ().</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.get_task_data">
<tt class="descname">get_task_data</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><cite>task</cite> &#8216;s `task_data`.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets <cite>task</cite> &#8216;s `task_data`.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.had_error">
<tt class="descname">had_error</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a> if the task resulted in an error, <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> otherwise.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Tests if <cite>task</cite> resulted in an error.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.propagate_boolean">
<tt class="descname">propagate_boolean</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/classes/GError.html#GLib.GError" title="(in GLib 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GLib.GError</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the task result, or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> on error</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets the result of <cite>task</cite> as a <a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a>.</p>
<p>If the task resulted in an error, or was cancelled, then this will
instead return <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> and set <cite>error</cite>.</p>
<p>Since this method transfers ownership of the return value (or
error) to the caller, you may only call it once.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.propagate_int">
<tt class="descname">propagate_int</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/classes/GError.html#GLib.GError" title="(in GLib 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GLib.GError</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the task result, or -1 on error</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">int</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets the result of <cite>task</cite> as an integer (#gssize).</p>
<p>If the task resulted in an error, or was cancelled, then this will
instead return -1 and set <cite>error</cite>.</p>
<p>Since this method transfers ownership of the return value (or
error) to the caller, you may only call it once.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.propagate_pointer">
<tt class="descname">propagate_pointer</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/classes/GError.html#GLib.GError" title="(in GLib 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GLib.GError</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the task result, or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> on error</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Gets the result of <cite>task</cite> as a pointer, and transfers ownership
of that value to the caller.</p>
<p>If the task resulted in an error, or was cancelled, then this will
instead return <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> and set <cite>error</cite>.</p>
<p>Since this method transfers ownership of the return value (or
error) to the caller, you may only call it once.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.return_boolean">
<tt class="descname">return_boolean</tt><big>(</big><em>result</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>result</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a>) &#8211; the <a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a> result of a task function.</td>
</tr>
</tbody>
</table>
<p>Sets <cite>task</cite> &#8216;s result to <cite>result</cite> and completes the task (see
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_pointer</span></tt></a> () for more discussion of exactly what this
means).</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.return_error">
<tt class="descname">return_error</tt><big>(</big><em>error</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>error</strong> (<a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/classes/GError.html#GLib.GError" title="(in GLib 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GLib.GError</span></tt></a>) &#8211; the <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/Error.html#GLib.Error" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.Error</span></tt></a> result of a task function.</td>
</tr>
</tbody>
</table>
<p>Sets <cite>task</cite> &#8216;s result to <cite>error</cite> (which <cite>task</cite> assumes ownership of)
and completes the task (see <a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_pointer</span></tt></a> () for more
discussion of exactly what this means).</p>
<p>Note that since the task takes ownership of <cite>error</cite>, and since the
task may be completed before returning from <a class="reference internal" href="#Gio.Task.return_error" title="Gio.Task.return_error"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_error</span></tt></a> (),
you cannot assume that <cite>error</cite> is still valid after calling this.
Call <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/Error.html#GLib.Error.copy" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.Error.copy</span></tt></a> () on the error if you need to keep a local copy
as well.</p>
<p>See also <tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_new_error</span></tt> ().</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.return_error_if_cancelled">
<tt class="descname">return_error_if_cancelled</tt><big>(</big><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a> if <cite>task</cite> has been cancelled, <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> if not</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Checks if <cite>task</cite> &#8216;s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> has been cancelled, and if so, sets
<cite>task</cite> &#8216;s error accordingly and completes the task (see
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_pointer</span></tt></a> () for more discussion of exactly what this
means).</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.return_int">
<tt class="descname">return_int</tt><big>(</big><em>result</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>result</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">int</span></tt></a>) &#8211; the integer (#gssize) result of a task function.</td>
</tr>
</tbody>
</table>
<p>Sets <cite>task</cite> &#8216;s result to <cite>result</cite> and completes the task (see
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_pointer</span></tt></a> () for more discussion of exactly what this
means).</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.return_pointer">
<tt class="descname">return_pointer</tt><big>(</big><em>result</em>, <em>result_destroy</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>result</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; the pointer result of a task
function</li>
<li><strong>result_destroy</strong> (<tt class="xref py py-class docutils literal"><span class="pre">GLib.DestroyNotify</span></tt> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; a <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/callbacks.html#GLib.DestroyNotify" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.DestroyNotify</span></tt></a> function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Sets <cite>task</cite> &#8216;s result to <cite>result</cite> and completes the task. If <cite>result</cite>
is not <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>, then <cite>result_destroy</cite> will be used to free <cite>result</cite> if
the caller does not take ownership of it with
<a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.propagate_pointer</span></tt></a> ().</p>
<p>&#8220;Completes the task&#8221; means that for an ordinary asynchronous task
it will either invoke the task&#8217;s callback, or else queue that
callback to be invoked in the proper <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a>, or in the next
iteration of the current <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/MainContext.html#GLib.MainContext" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.MainContext</span></tt></a>. For a task run via
<tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.run_in_thread</span></tt> () or <tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.run_in_thread_sync</span></tt> (), calling this
method will save <cite>result</cite> to be returned to the caller later, but
the task will not actually be completed until the <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.TaskThreadFunc</span></tt></a>
exits.</p>
<p>Note that since the task may be completed before returning from
<a class="reference internal" href="#Gio.Task.return_pointer" title="Gio.Task.return_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_pointer</span></tt></a> (), you cannot assume that <cite>result</cite> is still
valid after calling this, unless you are still holding another
reference on it.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.set_check_cancellable">
<tt class="descname">set_check_cancellable</tt><big>(</big><em>check_cancellable</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>check_cancellable</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a>) &#8211; whether <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> will check the state of
its <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> for you.</td>
</tr>
</tbody>
</table>
<p>Sets or clears <cite>task</cite> &#8216;s check-cancellable flag. If this is <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>
(the default), then <a class="reference internal" href="#Gio.Task.propagate_pointer" title="Gio.Task.propagate_pointer"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.propagate_pointer</span></tt></a> (), etc, and
<a class="reference internal" href="#Gio.Task.had_error" title="Gio.Task.had_error"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.had_error</span></tt></a> () will check the task&#8217;s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> first, and
if it has been cancelled, then they will consider the task to have
returned an &#8220;Operation was cancelled&#8221; error
(<a class="reference internal" href="../enums.html#Gio.IOErrorEnum.CANCELLED" title="Gio.IOErrorEnum.CANCELLED"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.IOErrorEnum.CANCELLED</span></tt></a> ), regardless of any other error or return
value the task may have had.</p>
<p>If <cite>check_cancellable</cite> is <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a>, then the <a class="reference internal" href="#Gio.Task" title="Gio.Task"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task</span></tt></a> will not check the
cancellable itself, and it is up to <cite>task</cite> &#8216;s owner to do this (eg,
via <a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_error_if_cancelled</span></tt></a> ()).</p>
<p>If you are using <a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_return_on_cancel</span></tt></a> () as well, then
you must leave check-cancellable set <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.set_priority">
<tt class="descname">set_priority</tt><big>(</big><em>priority</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>priority</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">int</span></tt></a>) &#8211; the [priority][io-priority] of the request</td>
</tr>
</tbody>
</table>
<p>Sets <cite>task</cite> &#8216;s priority. If you do not call this, it will default to
<a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/constants.html#GLib.PRIORITY_DEFAULT" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.PRIORITY_DEFAULT</span></tt></a>.</p>
<p>This will affect the priority of <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/structs/Source.html#GLib.Source" title="(in GLib 2.0 v2.0)"><tt class="xref py py-class docutils literal"><span class="pre">GLib.Sources</span></tt></a> created with
<tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.attach_source</span></tt> () and the scheduling of tasks run in threads,
and can also be explicitly retrieved later via
<a class="reference internal" href="#Gio.Task.get_priority" title="Gio.Task.get_priority"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.get_priority</span></tt></a> ().</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.set_return_on_cancel">
<tt class="descname">set_return_on_cancel</tt><big>(</big><em>return_on_cancel</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>return_on_cancel</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a>) &#8211; whether the task returns automatically when
it is cancelled.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a> if <cite>task</cite> &#8216;s return-on-cancel flag was changed to
match <cite>return_on_cancel</cite>. <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> if <cite>task</cite> has already been
cancelled.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Sets or clears <cite>task</cite> &#8216;s return-on-cancel flag. This is only
meaningful for tasks run via <tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.run_in_thread</span></tt> () or
<tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.run_in_thread_sync</span></tt> ().</p>
<p>If <cite>return_on_cancel</cite> is <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>, then cancelling <cite>task</cite> &#8216;s
<a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> will immediately cause it to return, as though the
task&#8217;s <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.TaskThreadFunc</span></tt></a> had called
<a class="reference internal" href="#Gio.Task.return_error_if_cancelled" title="Gio.Task.return_error_if_cancelled"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.return_error_if_cancelled</span></tt></a> () and then returned.</p>
<p>This allows you to create a cancellable wrapper around an
uninterruptable function. The <a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.TaskThreadFunc</span></tt></a> just needs to be
careful that it does not modify any externally-visible state after
it has been cancelled. To do that, the thread should call
<a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_return_on_cancel</span></tt></a> () again to (atomically) set
return-on-cancel <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> before making externally-visible changes;
if the task gets cancelled before the return-on-cancel flag could
be changed, <a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_return_on_cancel</span></tt></a> () will indicate this by
returning <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a>.</p>
<p>You can disable and re-enable this flag multiple times if you wish.
If the task&#8217;s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> is cancelled while return-on-cancel is
<a class="reference external" href="http://docs.python.org/2.7/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a>, then calling <a class="reference internal" href="#Gio.Task.set_return_on_cancel" title="Gio.Task.set_return_on_cancel"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.set_return_on_cancel</span></tt></a> () to set it <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>
again will cause the task to be cancelled at that point.</p>
<p>If the task&#8217;s <a class="reference internal" href="Cancellable.html#Gio.Cancellable" title="Gio.Cancellable"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Cancellable</span></tt></a> is already cancelled before you call
<tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.run_in_thread</span></tt> ()/g_task_run_in_thread_sync(), then the
<a class="reference internal" href="../callbacks.html#Gio.TaskThreadFunc" title="Gio.TaskThreadFunc"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.TaskThreadFunc</span></tt></a> will still be run (for consistency), but the task
will also be completed right away.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.set_source_tag">
<tt class="descname">set_source_tag</tt><big>(</big><em>source_tag</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>source_tag</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a>) &#8211; an opaque pointer indicating the source of this task</td>
</tr>
</tbody>
</table>
<p>Sets <cite>task</cite> &#8216;s source tag. You can use this to tag a task return
value with a particular pointer (usually a pointer to the function
doing the tagging) and then later check it using
<a class="reference internal" href="#Gio.Task.get_source_tag" title="Gio.Task.get_source_tag"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.Task.get_source_tag</span></tt></a> () (or <a class="reference internal" href="../interfaces/AsyncResult.html#Gio.AsyncResult.is_tagged" title="Gio.AsyncResult.is_tagged"><tt class="xref py py-obj docutils literal"><span class="pre">Gio.AsyncResult.is_tagged</span></tt></a> ()) in the
task&#8217;s &#8220;finish&#8221; function, to figure out if the response came from a
particular place.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Gio.Task.set_task_data">
<tt class="descname">set_task_data</tt><big>(</big><em>task_data</em>, <em>task_data_destroy</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>task_data</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; task-specific data</li>
<li><strong>task_data_destroy</strong> (<tt class="xref py py-class docutils literal"><span class="pre">GLib.DestroyNotify</span></tt> or <a class="reference external" href="http://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>) &#8211; <a class="reference external" href="../_devhelp/Gio-2.0/../../../python-GLib-2.0/callbacks.html#GLib.DestroyNotify" title="(in GLib 2.0 v2.0)"><tt class="xref py py-obj docutils literal"><span class="pre">GLib.DestroyNotify</span></tt></a> for <cite>task_data</cite></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Sets <cite>task</cite> &#8216;s task data (freeing the existing task data, if any).</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.36.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>

    </section>

  </div> 

</body>

  

</html>